name: Bump version

on:
  push:
    branches: [develop]

jobs:
  bump:

    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: [3.7]

    steps:
    - uses: actions/checkout@v2
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v1
      with:
        python-version: ${{ matrix.python-version }}
    - name: Install dependencies
      run: |
        DIR=$(pwd)
        cd ../
        python -m pip install --upgrade pip
        if [ -f ${DIR}/requirements.txt ]; then pip install -r ${DIR}/requirements-dev.txt ; fi

    - name: Bump version
      run: |
        git config user.email efeubiqube@ubiqube.com
        git config user.name "Eduardo Ferreira (bot)"
        bump2version patch --commit msa_sdk/__init__.py
